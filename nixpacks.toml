[phases.setup]
nixPkgs = ["python311", "python311Packages.pip"]

[phases.install]
cmds = [
  "pip install --no-cache-dir --upgrade pip setuptools wheel",
  "pip install --no-cache-dir -r backend/requirements.txt"
]

[phases.build]
cmds = []

[start]
cmd = "sh -c 'gunicorn backend.app:app --bind 0.0.0.0:${PORT:-8000} --workers 2 --timeout 120 --access-logfile - --error-logfile -'"

[variables]
NIXPACKS_NO_MUSL = "1"
PYTHONUNBUFFERED = "1"
